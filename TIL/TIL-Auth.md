# TIL - ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ (Authentication)

## ğŸ“š ëª©ì°¨
1. [Context APIë€ ë¬´ì—‡ì¸ê°€?](#1-context-apië€-ë¬´ì—‡ì¸ê°€)
2. [ì¸ì¦ ì‹œìŠ¤í…œ ì „ì²´ êµ¬ì¡°](#2-ì¸ì¦-ì‹œìŠ¤í…œ-ì „ì²´-êµ¬ì¡°)
3. [AuthContext ìƒì„¸ ë¶„ì„](#3-authcontext-ìƒì„¸-ë¶„ì„)
4. [useAuth í›… ë¶„ì„](#4-useauth-í›…-ë¶„ì„)
5. [localStorageì™€ í† í° ê´€ë¦¬](#5-localstorageì™€-í† í°-ê´€ë¦¬)
6. [TanStack Query useMutation í™œìš©](#6-tanstack-query-usemutation-í™œìš©)

---

## 1. Context APIë€ ë¬´ì—‡ì¸ê°€?

### ğŸ¯ Context APIì˜ í•„ìš”ì„±

**ë¬¸ì œ ìƒí™©: Props Drilling (í”„ë¡­ìŠ¤ ì§€ì˜¥)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  App (ìµœìƒìœ„)                    â”‚
â”‚            user = { id: 1, name: "í™ê¸¸ë™" }      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ propsë¡œ ì „ë‹¬
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Layout ì»´í¬ë„ŒíŠ¸                     â”‚
â”‚         (userë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ ì „ë‹¬ë§Œ í•¨)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ propsë¡œ ì „ë‹¬
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Header ì»´í¬ë„ŒíŠ¸                       â”‚
â”‚         (userë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ ì „ë‹¬ë§Œ í•¨)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ propsë¡œ ì „ë‹¬
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          UserProfile ì»´í¬ë„ŒíŠ¸                    â”‚
â”‚        ì—¬ê¸°ì„œ ë¹„ë¡œì†Œ user ì •ë³´ ì‚¬ìš©!             â”‚
â”‚        <div>{user.name}</div>                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë¬¸ì œì :**
- ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°ì´í„°ë¥¼ ì „ë‹¬ë§Œ í•´ì•¼ í•¨
- ì»´í¬ë„ŒíŠ¸ ê¹Šì´ê°€ ê¹Šì–´ì§ˆìˆ˜ë¡ props ê´€ë¦¬ê°€ ë³µì¡í•´ì§
- ì½”ë“œ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€

---

**í•´ê²°ì±…: Context API**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           AuthProvider (Context)                â”‚
â”‚            user = { id: 1, name: "í™ê¸¸ë™" }      â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           ì „ì—­ ìƒíƒœ ì €ì¥ì†Œ                  â”‚ â”‚
â”‚  â”‚  - user ì •ë³´                               â”‚ â”‚
â”‚  â”‚  - token ì •ë³´                              â”‚ â”‚
â”‚  â”‚  - isAuthenticated                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚              â”‚              â”‚
           â”‚              â”‚              â”‚
    ì§ì ‘ ì ‘ê·¼      ì§ì ‘ ì ‘ê·¼      ì§ì ‘ ì ‘ê·¼
           â†“              â†“              â†“
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ Header  â”‚    â”‚ Profile â”‚    â”‚ Recipe  â”‚
     â”‚         â”‚    â”‚         â”‚    â”‚         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     useAuth()      useAuth()      useAuth()
```

**ì¥ì :**
- ì¤‘ê°„ ì»´í¬ë„ŒíŠ¸ë¥¼ ê±°ì¹˜ì§€ ì•Šê³  ì§ì ‘ ì ‘ê·¼
- ì–´ë””ì„œë“  `useAuth()`ë¡œ ì¸ì¦ ìƒíƒœ ì‚¬ìš© ê°€ëŠ¥
- ì½”ë“œ ê°„ê²°í•˜ê³  ìœ ì§€ë³´ìˆ˜ ìš©ì´

---

### ğŸ“– Context API í•µì‹¬ ê°œë…

**1. Context ìƒì„±**
```typescript
const AuthContext = createContext<AuthContextType | undefined>(undefined);
```

**2. Providerë¡œ ê°’ ì œê³µ**
```typescript
<AuthContext.Provider value={ì¸ì¦ìƒíƒœ}>
  {children}
</AuthContext.Provider>
```

**3. Consumerë¡œ ê°’ ì‚¬ìš©**
```typescript
const auth = useContext(AuthContext);
```

---

## 2. ì¸ì¦ ì‹œìŠ¤í…œ ì „ì²´ êµ¬ì¡°

### ğŸ—ï¸ í´ë” êµ¬ì¡°

```
frontend/src/
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ AuthContext.tsx        # Context ì •ì˜ + Provider
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useAuth.ts             # Context ì‚¬ìš© í›…
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ auth.ts            # API í•¨ìˆ˜ (Axios)
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx             # AuthProvider ê°ì‹¸ê¸°
â”‚   â””â”€â”€ auth/
â”‚       â””â”€â”€ page.tsx           # ë¡œê·¸ì¸/íšŒì›ê°€ì… í˜ì´ì§€
â””â”€â”€ components/
    â””â”€â”€ ProtectedRoute.tsx     # ì¸ì¦ í•„ìš”í•œ ë¼ìš°íŠ¸ ë³´í˜¸
```

---

### ğŸ”„ ì¸ì¦ í”Œë¡œìš° ì‹œê°í™”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     1. ì‚¬ìš©ì ë¡œê·¸ì¸                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            2. useAuth().login(email, password)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           3. AuthContextì˜ loginMutation ì‹¤í–‰               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     4. lib/api/auth.tsì˜ login() í•¨ìˆ˜ í˜¸ì¶œ (Axios)         â”‚
â”‚        POST http://localhost:3001/auth/login                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              5. NestJS Backend ì‘ë‹µ                         â”‚
â”‚     { access_token: "jwt...", user: {...} }                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           6. onSuccess ì½œë°± ì‹¤í–‰                            â”‚
â”‚     - localStorageì— í† í°/ì‚¬ìš©ì ì €ì¥                       â”‚
â”‚     - Context ìƒíƒœ ì—…ë°ì´íŠ¸                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              7. ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì—ì„œ                           â”‚
â”‚          useAuth()ë¡œ ë¡œê·¸ì¸ ìƒíƒœ ì ‘ê·¼ ê°€ëŠ¥                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. AuthContext ìƒì„¸ ë¶„ì„

### ğŸ“ íŒŒì¼: `contexts/AuthContext.tsx`

#### 3.1 íƒ€ì… ì •ì˜

```typescript
export interface AuthContextType {
  user: User | null;              // í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´
  token: string | null;           // JWT í† í°
  isLoading: boolean;             // ì´ˆê¸°í™” ì¤‘ì¸ì§€ ì—¬ë¶€
  login: (email: string, password: string) => Promise<void>;
  register: (email: string, username: string, password: string) => Promise<void>;
  logout: () => void;
  isAuthenticated: boolean;       // ë¡œê·¸ì¸ ì—¬ë¶€ (!!token)
}
```

**ì™œ ì´ë ‡ê²Œ ì„¤ê³„í–ˆë‚˜?**
- `user: User | null`: ë¡œê·¸ì•„ì›ƒ ìƒíƒœëŠ” `null`
- `isLoading`: ì´ˆê¸°í™” ì¤‘ì—ëŠ” ë¡œê·¸ì¸ ìƒíƒœë¥¼ íŒë‹¨í•  ìˆ˜ ì—†ìŒ
- `isAuthenticated`: `!!token`ìœ¼ë¡œ boolean ë³€í™˜ (í¸ì˜ì„±)

---

#### 3.2 Context ìƒì„±

```typescript
export const AuthContext = createContext<AuthContextType | undefined>(undefined);
```

**ë¬¸ë²• ë¶„ì„:**
- `createContext<íƒ€ì…>()`: Context ìƒì„± í•¨ìˆ˜
- `undefined`: ì´ˆê¸°ê°’ (Provider ì—†ì´ ì‚¬ìš©í•˜ë©´ undefined)
- `export`: ë‹¤ë¥¸ íŒŒì¼ì—ì„œ import ê°€ëŠ¥

**ì™œ undefined?**
- Provider ë°–ì—ì„œ ì‚¬ìš©í•˜ë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ê¸° ìœ„í•¨
- `useAuth()` í›…ì—ì„œ ì²´í¬

---

#### 3.3 Provider ì»´í¬ë„ŒíŠ¸

**3.3.1 ìƒíƒœ ì •ì˜**

```typescript
const [user, setUser] = useState<User | null>(null);
const [token, setToken] = useState<string | null>(null);
const [isLoading, setIsLoading] = useState(true);
```

**useState ë¬¸ë²•:**
```typescript
const [ë³€ìˆ˜ëª…, setterí•¨ìˆ˜] = useState<íƒ€ì…>(ì´ˆê¸°ê°’);
```

**íƒ€ì… ì§€ì • ì´ìœ :**
- TypeScriptì—ì„œ íƒ€ì… ì•ˆì „ì„± í™•ë³´
- `User | null`: userëŠ” User ê°ì²´ ë˜ëŠ” nullë§Œ ê°€ëŠ¥

---

**3.3.2 ì´ˆê¸°í™” (useEffect)**

```typescript
useEffect(() => {
  const savedToken = localStorage.getItem("access_token");
  const savedUser = localStorage.getItem("user");

  if (savedToken && savedUser) {
    setToken(savedToken);
    setUser(JSON.parse(savedUser));
  }

  setIsLoading(false);
}, []);
```

**useEffect ë¬¸ë²•:**
```typescript
useEffect(() => {
  // ì‹¤í–‰í•  ì½”ë“œ
}, [ì˜ì¡´ì„±ë°°ì—´]);
```

**ì˜ì¡´ì„± ë°°ì—´ì´ ë¹ˆ ë°°ì—´ `[]`ì¸ ì´ìœ :**
- ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ **ë‹¨ í•œ ë²ˆë§Œ** ì‹¤í–‰
- ìƒˆë¡œê³ ì¹¨ ì‹œ localStorageì—ì„œ í† í° ë³µêµ¬

**í”Œë¡œìš°:**
```
í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
    â†“
useEffect ì‹¤í–‰
    â†“
localStorage í™•ì¸
    â†“
í† í° ìˆìœ¼ë©´ â†’ ë¡œê·¸ì¸ ìƒíƒœ ë³µêµ¬
í† í° ì—†ìœ¼ë©´ â†’ ë¡œê·¸ì•„ì›ƒ ìƒíƒœ ìœ ì§€
    â†“
isLoading = false
```

---

**3.3.3 ë¡œê·¸ì¸ Mutation**

```typescript
const loginMutation = useMutation({
  mutationFn: authApi.login,
  onSuccess: (data) => {
    localStorage.setItem("access_token", data.access_token);
    localStorage.setItem("user", JSON.stringify(data.user));

    setToken(data.access_token);
    setUser(data.user);
  },
  onError: (error) => {
    console.error("ë¡œê·¸ì¸ ì‹¤íŒ¨:", error);
    throw error;
  },
});
```

**useMutation êµ¬ì¡°:**
```typescript
useMutation({
  mutationFn: APIí˜¸ì¶œí•¨ìˆ˜,    // ì‹¤ì œ API í•¨ìˆ˜
  onSuccess: (ì‘ë‹µë°ì´í„°) => { // ì„±ê³µ ì‹œ ì‹¤í–‰
    // ìƒíƒœ ì—…ë°ì´íŠ¸
  },
  onError: (ì—ëŸ¬) => {         // ì‹¤íŒ¨ ì‹œ ì‹¤í–‰
    // ì—ëŸ¬ ì²˜ë¦¬
  },
});
```

**onSuccess ì½œë°± ìƒì„¸:**
```typescript
onSuccess: (data) => {
  // data = { access_token: "jwt...", user: {...} }

  // 1. localStorageì— ì €ì¥ (ìƒˆë¡œê³ ì¹¨ í›„ì—ë„ ìœ ì§€)
  localStorage.setItem("access_token", data.access_token);
  localStorage.setItem("user", JSON.stringify(data.user));

  // 2. Context ìƒíƒœ ì—…ë°ì´íŠ¸ (ì¦‰ì‹œ ë°˜ì˜)
  setToken(data.access_token);
  setUser(data.user);
}
```

**JSON.stringifyì˜ í•„ìš”ì„±:**
```typescript
// âŒ ê°ì²´ë¥¼ ì§ì ‘ ì €ì¥í•˜ë©´ [object Object]ë¡œ ì €ì¥ë¨
localStorage.setItem("user", data.user);

// âœ… JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•´ì„œ ì €ì¥
localStorage.setItem("user", JSON.stringify(data.user));

// ì½ì„ ë•ŒëŠ” JSON.parseë¡œ ë‹¤ì‹œ ê°ì²´ë¡œ ë³€í™˜
const user = JSON.parse(localStorage.getItem("user"));
```

---

**3.3.4 ë¡œê·¸ì¸ í•¨ìˆ˜**

```typescript
const login = async (email: string, password: string) => {
  try {
    await loginMutation.mutateAsync({ email, password });
  } catch (error) {
    throw error;
  }
};
```

**mutateAsync vs mutate ì°¨ì´:**

| êµ¬ë¶„ | mutate() | mutateAsync() |
|------|----------|---------------|
| ë°˜í™˜ê°’ | void | Promise |
| await ì‚¬ìš© | ë¶ˆê°€ëŠ¥ | ê°€ëŠ¥ |
| ì—ëŸ¬ ì²˜ë¦¬ | onError ì½œë°±ë§Œ | try-catch ê°€ëŠ¥ |
| ì‚¬ìš© ì‚¬ë¡€ | ë‹¨ìˆœ ì‹¤í–‰ | ìˆœì°¨ì  ì‘ì—… í•„ìš” ì‹œ |

**ì™œ mutateAsyncë¥¼ ì‚¬ìš©í–ˆë‚˜?**
- íšŒì›ê°€ì… í›„ ìë™ ë¡œê·¸ì¸ì„ ìœ„í•´ ìˆœì°¨ì  ì‹¤í–‰ í•„ìš”
- try-catchë¡œ ì—ëŸ¬ë¥¼ ìƒìœ„ë¡œ ì „ë‹¬

---

**3.3.5 íšŒì›ê°€ì… + ìë™ ë¡œê·¸ì¸**

```typescript
const register = async (email: string, username: string, password: string) => {
  try {
    await registerMutation.mutateAsync({ email, username, password });
    // íšŒì›ê°€ì… ì„±ê³µ í›„ ìë™ ë¡œê·¸ì¸
    await login(email, password);
  } catch (error) {
    throw error;
  }
};
```

**ìˆœì°¨ì  ì‹¤í–‰:**
```
1. registerMutation ì‹¤í–‰ (íšŒì›ê°€ì… API)
    â†“ ì„±ê³µ
2. login í•¨ìˆ˜ ì‹¤í–‰ (ë¡œê·¸ì¸ API)
    â†“ ì„±ê³µ
3. ì‚¬ìš©ìëŠ” íšŒì›ê°€ì…ê³¼ ë™ì‹œì— ë¡œê·¸ì¸ ì™„ë£Œ
```

---

**3.3.6 ë¡œê·¸ì•„ì›ƒ**

```typescript
const logout = () => {
  localStorage.removeItem("access_token");
  localStorage.removeItem("user");
  setToken(null);
  setUser(null);
};
```

**ë™ì‘:**
1. localStorage ë°ì´í„° ì‚­ì œ
2. Context ìƒíƒœ ì´ˆê¸°í™”
3. ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì— ë³€ê²½ ì‚¬í•­ ì¦‰ì‹œ ë°˜ì˜

---

**3.3.7 Provider ë°˜í™˜**

```typescript
const value = {
  user,
  token,
  isLoading,
  login,
  register,
  logout,
  isAuthenticated: !!token,
};

return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;
```

**!! (Double NOT) ì—°ì‚°ì:**
```typescript
!!token
// â†“ ë™ì‘ ê³¼ì •
!token         // tokenì´ ìˆìœ¼ë©´ false, ì—†ìœ¼ë©´ true
!!token        // ë‹¤ì‹œ ë°˜ì „ â†’ tokenì´ ìˆìœ¼ë©´ true, ì—†ìœ¼ë©´ false

// ì˜ˆì‹œ
!!null         // false
!!undefined    // false
!!""           // false
!!"jwt..."     // true
```

**childrenì´ë€?**
```typescript
<AuthProvider>
  <App />          â† ì´ ë¶€ë¶„ì´ children
</AuthProvider>
```

---

## 4. useAuth í›… ë¶„ì„

### ğŸ“ íŒŒì¼: `hooks/useAuth.ts`

```typescript
"use client";

import { useContext } from "react";
import { AuthContext } from "@/contexts/AuthContext";

export function useAuth() {
  const context = useContext(AuthContext);

  if (context === undefined) {
    throw new Error("useAuth must be used within AuthProvider");
  }

  return context;
}
```

---

### ğŸ” ì½”ë“œ ë¶„ì„

**1. useContext ì‚¬ìš©**
```typescript
const context = useContext(AuthContext);
```

**useContextì˜ ì—­í• :**
- Contextì—ì„œ ê°’ì„ ê°€ì ¸ì˜´
- AuthProvider ì•ˆì—ì„œ ì‚¬ìš©í•˜ë©´ valueë¥¼ ë°›ìŒ
- AuthProvider ë°–ì—ì„œ ì‚¬ìš©í•˜ë©´ undefined

---

**2. ì—ëŸ¬ ì²´í¬**
```typescript
if (context === undefined) {
  throw new Error("useAuth must be used within AuthProvider");
}
```

**ì™œ í•„ìš”í•œê°€?**

```typescript
// âŒ ì˜ëª»ëœ ì‚¬ìš© (AuthProvider ë°–)
function SomeComponent() {
  const auth = useAuth();  // ì—ëŸ¬ ë°œìƒ!
  // â†’ "useAuth must be used within AuthProvider"
}

// âœ… ì˜¬ë°”ë¥¸ ì‚¬ìš© (AuthProvider ì•ˆ)
<AuthProvider>
  <SomeComponent />  {/* ì—¬ê¸°ì„œëŠ” useAuth() ì‚¬ìš© ê°€ëŠ¥ */}
</AuthProvider>
```

**ê°œë°œì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€:**
- ì‹¤ìˆ˜ë¥¼ ì¦‰ì‹œ ë°œê²¬ ê°€ëŠ¥
- ì–´ë–»ê²Œ ìˆ˜ì •í•´ì•¼ í•˜ëŠ”ì§€ ëª…í™•

---

**3. íƒ€ì… ì¢íˆê¸° (Type Narrowing)**

```typescript
// contextì˜ íƒ€ì…: AuthContextType | undefined

if (context === undefined) {
  throw new Error(...);
}

// ì´ ì‹œì ë¶€í„° contextì˜ íƒ€ì…: AuthContextType (undefined ì œì™¸)
return context;
```

**TypeScriptì˜ Type Guard:**
- `if` ì²´í¬ í›„ì—ëŠ” TypeScriptê°€ íƒ€ì…ì„ ìë™ìœ¼ë¡œ ì¢í˜
- `context.user` ì ‘ê·¼ ì‹œ undefined ì²´í¬ ë¶ˆí•„ìš”

---

### ğŸ¯ ì‚¬ìš© ì˜ˆì‹œ

```typescript
// ë¡œê·¸ì¸ í˜ì´ì§€
function LoginPage() {
  const { login, isAuthenticated } = useAuth();

  const handleSubmit = async (e) => {
    e.preventDefault();
    await login(email, password);
  };

  return <form onSubmit={handleSubmit}>...</form>;
}

// í”„ë¡œí•„ í˜ì´ì§€
function ProfilePage() {
  const { user, logout } = useAuth();

  return (
    <div>
      <h1>{user?.username}</h1>
      <button onClick={logout}>ë¡œê·¸ì•„ì›ƒ</button>
    </div>
  );
}

// ë„¤ë¹„ê²Œì´ì…˜ ë°”
function Navigation() {
  const { isAuthenticated, user } = useAuth();

  return (
    <nav>
      {isAuthenticated ? (
        <span>í™˜ì˜í•©ë‹ˆë‹¤, {user?.username}ë‹˜</span>
      ) : (
        <Link href="/auth">ë¡œê·¸ì¸</Link>
      )}
    </nav>
  );
}
```

---

## 5. localStorageì™€ í† í° ê´€ë¦¬

### ğŸ’¾ localStorage vs sessionStorage

#### ğŸ“Š ë¸Œë¼ìš°ì € ì €ì¥ì†Œ ì¢…ë¥˜

**ë¸Œë¼ìš°ì €ëŠ” 3ê°€ì§€ ì €ì¥ì†Œë¥¼ ì œê³µí•©ë‹ˆë‹¤:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ë¸Œë¼ìš°ì € ì €ì¥ì†Œ ë¹„êµ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   localStorage  â”‚  sessionStorage â”‚      Cookie         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì˜êµ¬ ì €ì¥       â”‚   íƒ­ ë‹¨ìœ„ ì €ì¥   â”‚   ë§Œë£Œ ì‹œê°„ ì„¤ì •    â”‚
â”‚  (ìˆ˜ë™ ì‚­ì œ)     â”‚  (íƒ­ ë‹«ìœ¼ë©´ ì‚­ì œ)â”‚   (ì„œë²„ë¡œ ìë™ ì „ì†¡)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### ğŸ” localStorage vs sessionStorage ìƒì„¸ ë¹„êµ

| êµ¬ë¶„ | localStorage | sessionStorage |
|------|-------------|----------------|
| **ë°ì´í„° ìœ ì§€ ê¸°ê°„** | ì˜êµ¬ì  (ìˆ˜ë™ ì‚­ì œ ì „ê¹Œì§€) | ì„¸ì…˜ ì¢…ë£Œ ì‹œ ì‚­ì œ |
| **ë¸Œë¼ìš°ì € íƒ­ ê³µìœ ** | âœ… ëª¨ë“  íƒ­ì—ì„œ ê³µìœ  | âŒ ê° íƒ­ë§ˆë‹¤ ë…ë¦½ì  |
| **ë¸Œë¼ìš°ì € ë‹«ê¸°** | ë°ì´í„° ìœ ì§€ | ë°ì´í„° ì‚­ì œ |
| **ì €ì¥ ìš©ëŸ‰** | 5~10MB | 5~10MB |
| **API** | ë™ì¼ (setItem, getItem, removeItem) | ë™ì¼ |
| **ì‚¬ìš© ì‚¬ë¡€** | ìë™ ë¡œê·¸ì¸, ì‚¬ìš©ì ì„¤ì • | ì¼íšŒì„± ë°ì´í„°, ì„ì‹œ í† í° |

---

#### ğŸ¯ ê° ì €ì¥ì†Œì˜ ìƒëª…ì£¼ê¸° ì‹œê°í™”

**localStorage ìƒëª…ì£¼ê¸°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          localStorage (ì˜êµ¬ ì €ì¥)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   1. ë¡œê·¸ì¸ â†’ í† í° ì €ì¥                              â”‚
â”‚   localStorage.setItem("token", "jwt...")           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   2. ë¸Œë¼ìš°ì € ë‹«ê¸° â†’ ë°ì´í„° ìœ ì§€ âœ…                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   3. ë‹¤ìŒë‚  ë¸Œë¼ìš°ì € ë‹¤ì‹œ ì—´ê¸° â†’ ë°ì´í„° ìœ ì§€ âœ…      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   4. ë¡œê·¸ì•„ì›ƒ ë˜ëŠ” ìˆ˜ë™ ì‚­ì œ â†’ ë°ì´í„° ì‚­ì œ           â”‚
â”‚   localStorage.removeItem("token")                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**sessionStorage ìƒëª…ì£¼ê¸°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       sessionStorage (ì„¸ì…˜ ë‹¨ìœ„ ì €ì¥)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   1. ë¡œê·¸ì¸ â†’ í† í° ì €ì¥                              â”‚
â”‚   sessionStorage.setItem("token", "jwt...")         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   2. ìƒˆ íƒ­ ì—´ê¸° â†’ ë°ì´í„° ê³µìœ  ì•ˆ ë¨ âŒ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   3. ë¸Œë¼ìš°ì € ë‹«ê¸° â†’ ë°ì´í„° ì‚­ì œ âŒ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   4. ë‹¤ì‹œ ì—´ê¸° â†’ ë°ì´í„° ì—†ìŒ (ìƒˆ ì„¸ì…˜)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### ğŸ’¡ ì‹¤ì œ ë™ì‘ ì˜ˆì‹œ

**localStorage ì˜ˆì‹œ:**
```typescript
// íƒ­ Aì—ì„œ ì‹¤í–‰
localStorage.setItem("user", "í™ê¸¸ë™");

// íƒ­ Bë¥¼ ìƒˆë¡œ ì—´ì–´ì„œ ì‹¤í–‰
console.log(localStorage.getItem("user")); // "í™ê¸¸ë™" âœ…

// ë¸Œë¼ìš°ì € ì¢…ë£Œ í›„ ë‹¤ì‹œ ì‹œì‘
console.log(localStorage.getItem("user")); // "í™ê¸¸ë™" âœ…
```

**sessionStorage ì˜ˆì‹œ:**
```typescript
// íƒ­ Aì—ì„œ ì‹¤í–‰
sessionStorage.setItem("user", "í™ê¸¸ë™");

// íƒ­ Bë¥¼ ìƒˆë¡œ ì—´ì–´ì„œ ì‹¤í–‰
console.log(sessionStorage.getItem("user")); // null âŒ

// íƒ­ Aì—ì„œ ë‹¤ì‹œ í™•ì¸
console.log(sessionStorage.getItem("user")); // "í™ê¸¸ë™" âœ…

// ë¸Œë¼ìš°ì € ì¢…ë£Œ í›„ ë‹¤ì‹œ ì‹œì‘
console.log(sessionStorage.getItem("user")); // null âŒ
```

---

#### ğŸ¤” ë¡œê·¸ì¸ì— ì–´ë–¤ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?

**ìƒí™©ë³„ ì¶”ì²œ:**

**1. localStorage ì‚¬ìš© (í˜„ì¬ í”„ë¡œì íŠ¸ ë°©ì‹) âœ…**

**ì¥ì :**
```
âœ… ìë™ ë¡œê·¸ì¸ (ê¸°ì–µí•˜ê¸°) ê¸°ëŠ¥ êµ¬í˜„ ê°€ëŠ¥
âœ… ì‚¬ìš©ì í¸ì˜ì„± ë†’ìŒ
âœ… ìƒˆ íƒ­ì—ì„œë„ ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€
âœ… ë¸Œë¼ìš°ì € ì¢…ë£Œ í›„ì—ë„ ë¡œê·¸ì¸ ìœ ì§€
```

**ë‹¨ì :**
```
âŒ ê³µìš© PCì—ì„œ ë³´ì•ˆ ì·¨ì•½
âŒ XSS ê³µê²©ì— ì·¨ì•½
âŒ ì‚¬ìš©ìê°€ ì§ì ‘ ë¡œê·¸ì•„ì›ƒí•´ì•¼ í•¨
```

**ì‚¬ìš© ì‚¬ë¡€:**
- ê°œì¸ ë””ë°”ì´ìŠ¤ (ìŠ¤ë§ˆíŠ¸í°, ê°œì¸ PC)
- ìë™ ë¡œê·¸ì¸ ê¸°ëŠ¥ ì œê³µ
- ëŒ€ë¶€ë¶„ì˜ ì›¹/ì•± ì„œë¹„ìŠ¤ (ë„¤ì´ë²„, êµ¬ê¸€, í˜ì´ìŠ¤ë¶ ë“±)

---

**2. sessionStorage ì‚¬ìš©**

**ì¥ì :**
```
âœ… íƒ­ ë‹«ìœ¼ë©´ ìë™ ë¡œê·¸ì•„ì›ƒ
âœ… ê³µìš© PCì—ì„œ ìƒëŒ€ì ìœ¼ë¡œ ì•ˆì „
âœ… ë¸Œë¼ìš°ì € ì¢…ë£Œ ì‹œ ìë™ ì‚­ì œ
```

**ë‹¨ì :**
```
âŒ ìë™ ë¡œê·¸ì¸ ë¶ˆê°€ëŠ¥
âŒ ìƒˆ íƒ­ë§ˆë‹¤ ë‹¤ì‹œ ë¡œê·¸ì¸ í•„ìš”
âŒ ì‚¬ìš©ì í¸ì˜ì„± ë‚®ìŒ
```

**ì‚¬ìš© ì‚¬ë¡€:**
- ì€í–‰/ê¸ˆìœµ ì„œë¹„ìŠ¤ (ë†’ì€ ë³´ì•ˆ í•„ìš”)
- ê³µìš© PC í™˜ê²½
- ì¼íšŒì„± ì‘ì—… (ì„¤ë¬¸ì¡°ì‚¬, íˆ¬í‘œ ë“±)

---

**3. HttpOnly Cookie (ê°€ì¥ ì•ˆì „) ğŸ”**

**ì¥ì :**
```
âœ… JavaScript ì ‘ê·¼ ë¶ˆê°€ (XSS ê³µê²© ë°©ì–´)
âœ… ì„œë²„ì—ì„œ ìë™ìœ¼ë¡œ ì¿ í‚¤ ì „ì†¡
âœ… ë§Œë£Œ ì‹œê°„ ì„¤ì • ê°€ëŠ¥
```

**ë‹¨ì :**
```
âŒ ì„œë²„ êµ¬í˜„ í•„ìš”
âŒ CSRF ê³µê²© ëŒ€ë¹„ í•„ìš”
âŒ ë³µì¡í•œ ì„¤ì •
```

**ì‚¬ìš© ì‚¬ë¡€:**
- í”„ë¡œë•ì…˜ í™˜ê²½ (ì‹¤ì œ ì„œë¹„ìŠ¤)
- ë†’ì€ ë³´ì•ˆì´ í•„ìš”í•œ ê²½ìš°

---

#### ğŸ“Œ ìš°ë¦¬ í”„ë¡œì íŠ¸ì—ì„œ localStorageë¥¼ ì„ íƒí•œ ì´ìœ 

**1. í•™ìŠµ ëª©ì :**
```typescript
// localStorageëŠ” ê°€ì¥ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„ ê°€ëŠ¥
localStorage.setItem("token", token);
const token = localStorage.getItem("token");
```

**2. ì‚¬ìš©ì í¸ì˜ì„±:**
- ë¸Œë¼ìš°ì € ì¢…ë£Œ í›„ì—ë„ ë¡œê·¸ì¸ ìœ ì§€
- ìë™ ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„ ìš©ì´

**3. êµ¬í˜„ ìš©ì´ì„±:**
- ì„œë²„ ì„¤ì • ë¶ˆí•„ìš”
- í´ë¼ì´ì–¸íŠ¸ë§Œìœ¼ë¡œ ì™„ê²°

**4. ê°œë°œ í™˜ê²½:**
- ê°œì¸ PC í™˜ê²½ (ê³µìš© PC ì•„ë‹˜)
- í•™ìŠµ/ê°œë°œ ë‹¨ê³„ (í”„ë¡œë•ì…˜ ì•„ë‹˜)

---

#### ğŸ”’ ë³´ì•ˆ ê°•í™” ë°©ë²• (í”„ë¡œë•ì…˜ í™˜ê²½)

**ì‹¤ì œ ì„œë¹„ìŠ¤ë¼ë©´ ì´ë ‡ê²Œ ê°œì„ :**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ë³´ì•ˆ ê°•í™” ì „ëµ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. HttpOnly Cookie ì‚¬ìš©                            â”‚
â”‚     â†’ JavaScript ì ‘ê·¼ ì°¨ë‹¨                          â”‚
â”‚                                                     â”‚
â”‚  2. Access Token (ì§§ì€ ë§Œë£Œì‹œê°„)                    â”‚
â”‚     â†’ 15ë¶„~1ì‹œê°„                                    â”‚
â”‚                                                     â”‚
â”‚  3. Refresh Token (ê¸´ ë§Œë£Œì‹œê°„)                     â”‚
â”‚     â†’ 1ì£¼~1ê°œì›”, HttpOnly Cookieì— ì €ì¥             â”‚
â”‚                                                     â”‚
â”‚  4. HTTPS í•„ìˆ˜                                      â”‚
â”‚     â†’ ì¤‘ê°„ì ê³µê²© ë°©ì–´                              â”‚
â”‚                                                     â”‚
â”‚  5. CSRF Token                                      â”‚
â”‚     â†’ Cross-Site ìš”ì²­ ìœ„ì¡° ë°©ì–´                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### ğŸ“ í•µì‹¬ ì •ë¦¬

| ì €ì¥ì†Œ | ìœ ì§€ ê¸°ê°„ | íƒ­ ê³µìœ  | ì‚¬ìš© ì‚¬ë¡€ |
|--------|----------|---------|----------|
| **localStorage** | ì˜êµ¬ | âœ… | ìë™ ë¡œê·¸ì¸ |
| **sessionStorage** | ì„¸ì…˜ | âŒ | ì¼íšŒì„± ë°ì´í„° |
| **Cookie** | ì„¤ì • ê°€ëŠ¥ | âœ… | ì„œë²„ ì¸ì¦ |

**ìš°ë¦¬ì˜ ì„ íƒ: localStorage**
- ê°„ë‹¨í•œ êµ¬í˜„
- ìë™ ë¡œê·¸ì¸ ì§€ì›
- í•™ìŠµ ëª©ì ì— ì í•©

**í”„ë¡œë•ì…˜ ì¶”ì²œ: HttpOnly Cookie + Refresh Token**
- ìµœê³  ìˆ˜ì¤€ì˜ ë³´ì•ˆ
- ìë™ ë¡œê·¸ì¸ + ë³´ì•ˆ ì–‘ë¦½

---

### ğŸ”„ í† í° ì €ì¥/ë³µêµ¬ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            1. ì‚¬ìš©ì ë¡œê·¸ì¸ ì„±ê³µ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     2. localStorageì— í† í° ì €ì¥                 â”‚
â”‚     localStorage.setItem("access_token", "jwt")â”‚
â”‚     localStorage.setItem("user", "{...}")      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         3. Context ìƒíƒœ ì—…ë°ì´íŠ¸                â”‚
â”‚         setToken("jwt")                         â”‚
â”‚         setUser({...})                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       4. ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      5. useEffectê°€ ì‹¤í–‰ (ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    6. localStorageì—ì„œ í† í° ì½ê¸°                â”‚
â”‚    const token = localStorage.getItem("...")    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       7. Context ìƒíƒœ ë³µêµ¬                      â”‚
â”‚       setToken(token)                           â”‚
â”‚       setUser(JSON.parse(user))                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     8. ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€! (ìƒˆë¡œê³ ì¹¨ í›„ì—ë„)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ” ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

**localStorageì˜ í•œê³„:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           XSS ê³µê²©ì— ì·¨ì•½                     â”‚
â”‚  ì•…ì„± ìŠ¤í¬ë¦½íŠ¸ê°€ localStorage ì ‘ê·¼ ê°€ëŠ¥       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ëŒ€ì•ˆ:**
1. **HttpOnly Cookie** (ë” ì•ˆì „)
   - JavaScript ì ‘ê·¼ ë¶ˆê°€
   - ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ Cookie ì „ì†¡

2. **í† í° ë§Œë£Œ ì‹œê°„ ì§§ê²Œ ì„¤ì •**
   - Access Token: 15ë¶„~1ì‹œê°„
   - Refresh Tokenìœ¼ë¡œ ê°±ì‹ 

3. **ë¯¼ê°í•œ ì •ë³´ëŠ” ì €ì¥í•˜ì§€ ì•Šê¸°**
   - ë¹„ë°€ë²ˆí˜¸ ì ˆëŒ€ ì €ì¥ ê¸ˆì§€
   - í† í°ë§Œ ì €ì¥

---

## 6. TanStack Query useMutation í™œìš©

### ğŸ¯ useMutationì´ë€?

**ë°ì´í„° ë³€ê²½ ì‘ì—…ì— íŠ¹í™”ëœ í›…:**
- POST, PUT, DELETE ìš”ì²­ì— ì‚¬ìš©
- ë¡œë”©, ì—ëŸ¬, ì„±ê³µ ìƒíƒœ ìë™ ê´€ë¦¬
- ì½œë°± í•¨ìˆ˜ë¡œ ë¶€ê°€ ì‘ì—… ìˆ˜í–‰

---

### ğŸ“Š useMutation vs useQuery ë¹„êµ

| êµ¬ë¶„ | useQuery | useMutation |
|------|----------|-------------|
| **ìš©ë„** | ë°ì´í„° ì¡°íšŒ (GET) | ë°ì´í„° ë³€ê²½ (POST/PUT/DELETE) |
| **ì‹¤í–‰ ì‹œì ** | ìë™ ì‹¤í–‰ | ìˆ˜ë™ ì‹¤í–‰ (mutate í˜¸ì¶œ) |
| **ìºì‹±** | ìë™ ìºì‹± | ìºì‹± ì•ˆ í•¨ |
| **ì¬ì‹œë„** | ìë™ ì¬ì‹œë„ | ìˆ˜ë™ ì„¤ì • |
| **ì‚¬ìš© ì‚¬ë¡€** | ëª©ë¡ ì¡°íšŒ, ìƒì„¸ ì¡°íšŒ | ìƒì„±, ìˆ˜ì •, ì‚­ì œ |

---

### ğŸ” loginMutation ìƒì„¸ ë¶„ì„

```typescript
const loginMutation = useMutation({
  mutationFn: authApi.login,
  onSuccess: (data) => {
    localStorage.setItem("access_token", data.access_token);
    localStorage.setItem("user", JSON.stringify(data.user));
    setToken(data.access_token);
    setUser(data.user);
  },
  onError: (error) => {
    console.error("ë¡œê·¸ì¸ ì‹¤íŒ¨:", error);
    throw error;
  },
});
```

**ê° ì†ì„± ì„¤ëª…:**

**1. mutationFn (í•„ìˆ˜)**
```typescript
mutationFn: authApi.login
```
- ì‹¤ì œ API í˜¸ì¶œ í•¨ìˆ˜
- `authApi.login()`ì€ Axiosë¡œ POST ìš”ì²­

**2. onSuccess (ì„ íƒ)**
```typescript
onSuccess: (data) => {
  // data = API ì‘ë‹µ ë°ì´í„°
  // ì„±ê³µ ì‹œ ì‹¤í–‰í•  ë¡œì§
}
```
- API í˜¸ì¶œ ì„±ê³µ ì‹œ ìë™ ì‹¤í–‰
- ìƒíƒœ ì—…ë°ì´íŠ¸, ë¦¬ë‹¤ì´ë ‰íŠ¸ ë“±

**3. onError (ì„ íƒ)**
```typescript
onError: (error) => {
  // error = ì—ëŸ¬ ê°ì²´
  // ì‹¤íŒ¨ ì‹œ ì‹¤í–‰í•  ë¡œì§
}
```
- API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ìë™ ì‹¤í–‰
- ì—ëŸ¬ ë¡œê¹…, ì‚¬ìš©ì ì•Œë¦¼ ë“±

---

### ğŸš€ mutation ì‹¤í–‰ ë°©ë²•

**1. mutate() - Promise ë°˜í™˜ ì•ˆ í•¨**
```typescript
loginMutation.mutate({ email, password });
// ë°”ë¡œ ë‹¤ìŒ ì½”ë“œ ì‹¤í–‰ (ë¹„ë™ê¸° ëŒ€ê¸° ì•ˆ í•¨)
console.log("API í˜¸ì¶œ ì‹œì‘!");
```

**2. mutateAsync() - Promise ë°˜í™˜**
```typescript
await loginMutation.mutateAsync({ email, password });
// API ì™„ë£Œ í›„ ë‹¤ìŒ ì½”ë“œ ì‹¤í–‰
console.log("API í˜¸ì¶œ ì™„ë£Œ!");
```

---

### ğŸ“ˆ mutation ìƒíƒœ í™œìš©

```typescript
const loginMutation = useMutation({ ... });

// ìƒíƒœ ê°’ë“¤
loginMutation.isPending   // ë¡œë”© ì¤‘ (true/false)
loginMutation.isSuccess   // ì„±ê³µ (true/false)
loginMutation.isError     // ì—ëŸ¬ (true/false)
loginMutation.data        // ì‘ë‹µ ë°ì´í„°
loginMutation.error       // ì—ëŸ¬ ê°ì²´
```

**UI ì˜ˆì‹œ:**
```typescript
<button
  onClick={() => loginMutation.mutate({ email, password })}
  disabled={loginMutation.isPending}
>
  {loginMutation.isPending ? "ë¡œê·¸ì¸ ì¤‘..." : "ë¡œê·¸ì¸"}
</button>

{loginMutation.isError && (
  <p className="error">{loginMutation.error.message}</p>
)}
```

---

## ğŸ“ í•µì‹¬ ê°œë… ì •ë¦¬

### 1. Context API
```
ì „ì—­ ìƒíƒœ ê´€ë¦¬ ë„êµ¬
â”œâ”€â”€ createContext() - Context ìƒì„±
â”œâ”€â”€ Provider - ê°’ ì œê³µ
â””â”€â”€ useContext() - ê°’ ì‚¬ìš©
```

### 2. ì¸ì¦ í”Œë¡œìš°
```
ë¡œê·¸ì¸ â†’ API í˜¸ì¶œ â†’ í† í° ë°›ê¸° â†’ localStorage ì €ì¥ â†’ Context ì—…ë°ì´íŠ¸
```

### 3. ìƒˆë¡œê³ ì¹¨ í›„ ë³µêµ¬
```
useEffect (ë¹ˆ ë°°ì—´) â†’ localStorage ì½ê¸° â†’ Context ë³µêµ¬
```

### 4. useMutation
```
ë°ì´í„° ë³€ê²½ ì‘ì—…
â”œâ”€â”€ mutationFn - API í•¨ìˆ˜
â”œâ”€â”€ onSuccess - ì„±ê³µ ì½œë°±
â””â”€â”€ onError - ì—ëŸ¬ ì½œë°±
```

### 5. ì»¤ìŠ¤í…€ í›… íŒ¨í„´
```
contexts/ - Context ì •ì˜ + Provider
hooks/ - Context ì‚¬ìš© í›…
lib/api/ - API í•¨ìˆ˜
```

---

## 7. React Hook Form ì™„ë²½ ê°€ì´ë“œ

### ğŸ¯ React Hook Formì´ë€?

**í¼ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬:**
- ë³µì¡í•œ í¼ ìƒíƒœë¥¼ ê°„ë‹¨í•˜ê²Œ ê´€ë¦¬
- ê²€ì¦(Validation) ìë™í™”
- ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ìµœì†Œí™”
- TypeScript ì™„ë²½ ì§€ì›

---

### ğŸ“Š ê¸°ì¡´ ë°©ì‹ vs React Hook Form

#### âŒ ê¸°ì¡´ ë°©ì‹ (useState ì‚¬ìš©)

```typescript
function LoginForm() {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [emailError, setEmailError] = useState("");
  const [passwordError, setPasswordError] = useState("");

  const handleSubmit = (e) => {
    e.preventDefault();

    // ê²€ì¦ ë¡œì§
    if (!email) setEmailError("ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");
    if (!password) setPasswordError("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");

    // API í˜¸ì¶œ
    login(email, password);
  };

  return (
    <form onSubmit={handleSubmit}>
      <input
        value={email}
        onChange={(e) => setEmail(e.target.value)}
      />
      {emailError && <p>{emailError}</p>}

      <input
        value={password}
        onChange={(e) => setPassword(e.target.value)}
      />
      {passwordError && <p>{passwordError}</p>}
    </form>
  );
}
```

**ë¬¸ì œì :**
```
âŒ 8ê°œ ì´ìƒì˜ ìƒíƒœ ê´€ë¦¬ í•„ìš” (í•„ë“œ + ì—ëŸ¬)
âŒ onChange ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ìˆ˜ë™ ì‘ì„±
âŒ ê²€ì¦ ë¡œì§ ìˆ˜ë™ êµ¬í˜„
âŒ ëª¨ë“  ì…ë ¥ë§ˆë‹¤ ë¦¬ë Œë”ë§ ë°œìƒ
âŒ ì½”ë“œ ì¤‘ë³µ ë§ìŒ
```

---

#### âœ… React Hook Form ë°©ì‹

```typescript
function LoginForm() {
  const { register, handleSubmit, formState: { errors } } = useForm<LoginFormData>({
    defaultValues: {
      email: "",
      password: "",
    },
  });

  const onSubmit = (data: LoginFormData) => {
    login(data.email, data.password);
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input
        {...register("email", {
          required: "ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
          pattern: {
            value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,
            message: "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤",
          },
        })}
      />
      {errors.email && <p>{errors.email.message}</p>}

      <input {...register("password", { required: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" })} />
      {errors.password && <p>{errors.password.message}</p>}
    </form>
  );
}
```

**ì¥ì :**
```
âœ… ë‹¨ 1ê°œì˜ í›…ìœ¼ë¡œ ëª¨ë“  ìƒíƒœ ê´€ë¦¬
âœ… onChange ìë™ ì²˜ë¦¬
âœ… ê²€ì¦ ê·œì¹™ ì„ ì–¸ì ìœ¼ë¡œ ì •ì˜
âœ… ë¦¬ë Œë”ë§ ìµœì í™” (uncontrolled input)
âœ… ì½”ë“œ ê°„ê²°
```

---

### ğŸ” useForm í›… ìƒì„¸ ë¶„ì„

#### 1ï¸âƒ£ ê¸°ë³¸ ì‚¬ìš©ë²•

```typescript
const { register, handleSubmit, formState } = useForm<FormData>({
  defaultValues: { /* ì´ˆê¸°ê°’ */ },
});
```

**ë°˜í™˜ê°’ êµ¬ì¡°:**
```
useForm()
â”œâ”€â”€ register()          - Input ë“±ë¡ í•¨ìˆ˜
â”œâ”€â”€ handleSubmit()      - í¼ ì œì¶œ í•¸ë“¤ëŸ¬
â”œâ”€â”€ formState           - í¼ ìƒíƒœ ê°ì²´
â”‚   â”œâ”€â”€ errors          - ê²€ì¦ ì—ëŸ¬
â”‚   â”œâ”€â”€ isDirty         - ë³€ê²½ ì—¬ë¶€
â”‚   â”œâ”€â”€ isSubmitting    - ì œì¶œ ì¤‘ ì—¬ë¶€
â”‚   â””â”€â”€ isValid         - ìœ íš¨ì„± ê²€ì‚¬ í†µê³¼ ì—¬ë¶€
â”œâ”€â”€ watch()             - í•„ë“œ ê°’ ì‹¤ì‹œê°„ ê°ì‹œ
â”œâ”€â”€ reset()             - í¼ ì´ˆê¸°í™”
â””â”€â”€ setValue()          - ê°’ ì§ì ‘ ì„¤ì •
```

---

#### 2ï¸âƒ£ register() í•¨ìˆ˜ - Input ë“±ë¡

**ê¸°ë³¸ êµ¬ì¡°:**
```typescript
{...register("í•„ë“œëª…", {
  required: "ì—ëŸ¬ ë©”ì‹œì§€",
  minLength: { value: 6, message: "ìµœì†Œ 6ì" },
  maxLength: { value: 20, message: "ìµœëŒ€ 20ì" },
  pattern: { value: /ì •ê·œì‹/, message: "í˜•ì‹ ì˜¤ë¥˜" },
  validate: (value) => value === "ì¡°ê±´" || "ì—ëŸ¬ ë©”ì‹œì§€",
})}
```

**ë™ì‘ ì›ë¦¬:**
```typescript
// {...register("email")}ëŠ” ì•„ë˜ì™€ ê°™ì´ í™•ì¥ë¨:

{
  name: "email",
  ref: (element) => { /* Input ìš”ì†Œ ì°¸ì¡° ì €ì¥ */ },
  onChange: (e) => { /* ê°’ ë³€ê²½ ì²˜ë¦¬ */ },
  onBlur: (e) => { /* í¬ì»¤ìŠ¤ ì•„ì›ƒ ì²˜ë¦¬ */ },
}
```

**ASCII ì‹œê°í™”:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  {...register("email", { required: true })} â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Spread Operator í™•ì¥                â”‚
â”‚  name="email"                               â”‚
â”‚  ref={í•¨ìˆ˜}                                  â”‚
â”‚  onChange={ìë™ìƒì„±í•¸ë“¤ëŸ¬}                   â”‚
â”‚  onBlur={ìë™ìƒì„±í•¸ë“¤ëŸ¬}                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <input name="email" ref={...} ... />       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 3ï¸âƒ£ ê²€ì¦ ê·œì¹™ (Validation Rules)

**ëª¨ë“  ê²€ì¦ ê·œì¹™:**

| ê·œì¹™ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| `required` | í•„ìˆ˜ ì…ë ¥ | `required: "í•„ìˆ˜ í•­ëª©ì…ë‹ˆë‹¤"` |
| `minLength` | ìµœì†Œ ê¸¸ì´ | `minLength: { value: 6, message: "ìµœì†Œ 6ì" }` |
| `maxLength` | ìµœëŒ€ ê¸¸ì´ | `maxLength: { value: 20, message: "ìµœëŒ€ 20ì" }` |
| `min` | ìµœì†Œ ê°’ | `min: { value: 18, message: "18ì„¸ ì´ìƒ" }` |
| `max` | ìµœëŒ€ ê°’ | `max: { value: 100, message: "100 ì´í•˜" }` |
| `pattern` | ì •ê·œì‹ íŒ¨í„´ | `pattern: { value: /ì •ê·œì‹/, message: "í˜•ì‹ ì˜¤ë¥˜" }` |
| `validate` | ì»¤ìŠ¤í…€ ê²€ì¦ | `validate: (value) => value === "ì¡°ê±´"` |

**ì‹¤ì „ ì˜ˆì‹œ:**

```typescript
// ì´ë©”ì¼ ê²€ì¦
{...register("email", {
  required: "ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
  pattern: {
    value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,
    message: "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤",
  },
})}

// ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
{...register("password", {
  required: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
  minLength: {
    value: 8,
    message: "ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤",
  },
})}

// ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ê²€ì¦ (ì»¤ìŠ¤í…€)
{...register("confirmPassword", {
  required: "ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
  validate: (value) => value === password || "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤",
})}
```

---

#### 4ï¸âƒ£ watch() - ì‹¤ì‹œê°„ ê°’ ê°ì‹œ

**ìš©ë„: ë‹¤ë¥¸ í•„ë“œ ê°’ê³¼ ë¹„êµí•  ë•Œ**

```typescript
const password = watch("password");

{...register("confirmPassword", {
  validate: (value) => value === password || "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤",
})}
```

**ë™ì‘ ì›ë¦¬:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ìê°€ password í•„ë“œì— "abc123" ì…ë ¥      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  const password = watch("password")         â”‚
â”‚  â†’ password = "abc123"                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  confirmPassword ê²€ì¦ ì‹œ passwordì™€ ë¹„êµ     â”‚
â”‚  validate: (value) => value === password    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 5ï¸âƒ£ handleSubmit() - í¼ ì œì¶œ

**êµ¬ì¡°:**
```typescript
<form onSubmit={handleSubmit(onSubmit, onError)}>
```

**ë™ì‘ í”Œë¡œìš°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ì‚¬ìš©ìê°€ Submit ë²„íŠ¼ í´ë¦­            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     handleSubmit()ì´ ê²€ì¦ ì‹œì‘               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
         ê²€ì¦ ì„±ê³µ?     ê²€ì¦ ì‹¤íŒ¨?
              â†“              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ onSubmit()  â”‚   â”‚  onError()  â”‚
    â”‚ ì‹¤í–‰        â”‚   â”‚  (ì„ íƒì‚¬í•­)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì˜ˆì‹œ:**
```typescript
const onSubmit = (data: LoginFormData) => {
  console.log("ê²€ì¦ í†µê³¼!", data);
  // { email: "test@test.com", password: "password123" }
};

const onError = (errors) => {
  console.log("ê²€ì¦ ì‹¤íŒ¨!", errors);
  // { email: { type: "required", message: "ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" } }
};

<form onSubmit={handleSubmit(onSubmit, onError)}>
```

---

### ğŸ—ï¸ SOLID ì›ì¹™ ì ìš©: ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ í¼ ì„ ì–¸

#### ğŸ¤” ì™œ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì„ ì–¸í•´ì•¼ í• ê¹Œ?

**ë¬¸ì œ ìƒí™©:**
```typescript
// âŒ ì•ˆ ì¢‹ì€ ë°©ì‹: page.tsxì—ì„œ í¼ ì„ ì–¸
function AuthPage() {
  const loginForm = useForm<LoginFormData>();
  const signupForm = useForm<SignupFormData>();

  return (
    <>
      <LoginForm form={loginForm} />     {/* í¼ì„ propsë¡œ ì „ë‹¬ */}
      <SignupForm form={signupForm} />
    </>
  );
}
```

**ë¬¸ì œì :**
```
âŒ Page ì»´í¬ë„ŒíŠ¸ê°€ í¼ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ì„ ì•Œì•„ì•¼ í•¨
âŒ LoginForm í•„ë“œê°€ ì¶”ê°€ë˜ë©´ page.tsxë„ ìˆ˜ì • í•„ìš”
âŒ ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©ì„± ì €í•˜
âŒ ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP) ìœ„ë°˜
```

---

**í•´ê²°ì±…:**
```typescript
// âœ… ì¢‹ì€ ë°©ì‹: ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ í¼ ì„ ì–¸
function LoginForm({ onSuccess, isLoading }) {
  const { register, handleSubmit, formState: { errors } } = useForm<LoginFormData>({
    defaultValues: { email: "", password: "" },
  });

  const onSubmit = (data: LoginFormData) => {
    onSuccess(data);  // ë¶€ëª¨ì—ê²Œ ê²°ê³¼ë§Œ ì „ë‹¬
  };

  return <form onSubmit={handleSubmit(onSubmit)}>...</form>;
}

// ë¶€ëª¨ëŠ” ê²°ê³¼ë§Œ ë°›ìŒ
function AuthPage() {
  const handleLogin = async (data: LoginFormData) => {
    await login(data.email, data.password);
  };

  return <LoginForm onSuccess={handleLogin} isLoading={false} />;
}
```

**ì¥ì :**
```
âœ… LoginFormì´ ìì‹ ì˜ í¼ë§Œ ì±…ì„ (SRP)
âœ… ìº¡ìŠí™”: í¼ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ ìˆ¨ê¹€
âœ… ì¬ì‚¬ìš©ì„±: ë‹¤ë¥¸ ê³³ì—ì„œë„ ì‰½ê²Œ ì‚¬ìš©
âœ… ìœ ì§€ë³´ìˆ˜ì„±: LoginForm ìˆ˜ì • ì‹œ page.tsx ì˜í–¥ ì—†ìŒ
```

---

**ì•„í‚¤í…ì²˜ ë¹„êµ:**

```
âŒ ì•ˆ ì¢‹ì€ ë°©ì‹ (pageì—ì„œ í¼ ê´€ë¦¬)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   page.tsx                       â”‚
â”‚   â”œâ”€ loginForm = useForm()       â”‚  â† í¼ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ ì•Œì•„ì•¼ í•¨
â”‚   â”œâ”€ signupForm = useForm()      â”‚
â”‚   â”œâ”€ handleLogin()               â”‚
â”‚   â””â”€ <LoginForm form={...} />   â”‚  â† í¼ì„ propsë¡œ ì „ë‹¬
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… ì¢‹ì€ ë°©ì‹ (ì»´í¬ë„ŒíŠ¸ê°€ ìì²´ ê´€ë¦¬)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   page.tsx                       â”‚
â”‚   â”œâ”€ handleLogin(data)           â”‚  â† ê²°ê³¼ë§Œ ë°›ìŒ
â”‚   â””â”€ <LoginForm onSuccess={...}/>â”‚  â† ì½œë°±ë§Œ ì „ë‹¬
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LoginForm.tsx                  â”‚
â”‚   â”œâ”€ useForm() ë‚´ë¶€ì—ì„œ ì„ ì–¸      â”‚  â† ìì²´ í¼ ê´€ë¦¬
â”‚   â”œâ”€ register()                  â”‚
â”‚   â””â”€ handleSubmit()              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ”§ forwardRef íŒ¨í„´ - PasswordField ì»´í¬ë„ŒíŠ¸

#### ğŸ¤” ì™œ forwardRefê°€ í•„ìš”í•œê°€?

**ë¬¸ì œ ìƒí™©:**
```typescript
// âŒ ì¼ë°˜ ì»´í¬ë„ŒíŠ¸ëŠ” refë¥¼ ë°›ì„ ìˆ˜ ì—†ìŒ
function PasswordField({ id, ...props }) {
  return <input id={id} {...props} />;
}

// register()ëŠ” refë¥¼ ì „ë‹¬í•˜ë ¤ê³  í•¨
<PasswordField {...register("password")} />
// ì—ëŸ¬! refê°€ ì „ë‹¬ë˜ì§€ ì•ŠìŒ
```

---

**í•´ê²°ì±…: forwardRef ì‚¬ìš©**
```typescript
import { forwardRef } from "react";

export const PasswordField = forwardRef<HTMLInputElement, PasswordFieldProps>(
  ({ id, placeholder, ...props }, ref) => {
    const [showPassword, setShowPassword] = useState(false);

    return (
      <Input
        id={id}
        type={showPassword ? "text" : "password"}
        placeholder={placeholder}
        ref={ref}              // â† ref ì „ë‹¬!
        {...props}             // â† registerì˜ ë‚˜ë¨¸ì§€ ì†ì„± ì „ë‹¬
      />
    );
  }
);

PasswordField.displayName = "PasswordField";
```

---

**forwardRef ë¬¸ë²• ë¶„ì„:**
```typescript
forwardRef<ìš”ì†Œíƒ€ì…, Propsíƒ€ì…>(
  (props, ref) => {
    return <ìš”ì†Œ ref={ref} {...props} />;
  }
)
```

**íƒ€ì… ë§¤ê°œë³€ìˆ˜:**
```typescript
forwardRef<HTMLInputElement, PasswordFieldProps>
//         â†‘                â†‘
//         ref íƒ€ì…          props íƒ€ì…
```

---

**ë™ì‘ í”Œë¡œìš°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <PasswordField {...register("password")} />â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  register()ê°€ ì „ë‹¬í•˜ëŠ” ê²ƒ:                   â”‚
â”‚  {                                          â”‚
â”‚    name: "password",                        â”‚
â”‚    ref: (element) => {...},  â† ref!         â”‚
â”‚    onChange: ...,                           â”‚
â”‚    onBlur: ...                              â”‚
â”‚  }                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  forwardRefë¡œ refë¥¼ ë‘ ë²ˆì§¸ ì¸ìë¡œ ë°›ìŒ       â”‚
â”‚  (props, ref) => { ... }                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  <Input ref={ref} {...props} />             â”‚
â”‚  â†’ Inputì— ref ì „ë‹¬ ì„±ê³µ!                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**ì™œ displayNameì´ í•„ìš”í•œê°€?**
```typescript
PasswordField.displayName = "PasswordField";
```

**ì´ìœ :**
- forwardRefë¡œ ê°ì‹¸ë©´ ì»´í¬ë„ŒíŠ¸ ì´ë¦„ì´ "Anonymous"ë¡œ í‘œì‹œë¨
- ë””ë²„ê¹… ì‹œ React DevToolsì—ì„œ ì‹ë³„ ì–´ë ¤ì›€
- displayName ì„¤ì •ìœ¼ë¡œ ëª…í™•í•œ ì»´í¬ë„ŒíŠ¸ ì´ë¦„ í‘œì‹œ

---

### ğŸ¯ ì‹¤ì „ êµ¬í˜„ ì˜ˆì‹œ

#### LoginForm.tsx (ì™„ì„± ì½”ë“œ)

```typescript
"use client";

import { useForm } from "react-hook-form";
import { LoginFormData } from "@/types/auth";

interface LoginFormProps {
  onSuccess: (data: LoginFormData) => void;
  isLoading: boolean;
}

export function LoginForm({ onSuccess, isLoading }: LoginFormProps) {
  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useForm<LoginFormData>({
    defaultValues: {
      email: "",
      password: "",
    },
  });

  const onSubmit = (data: LoginFormData) => {
    onSuccess(data);  // ë¶€ëª¨ì—ê²Œ ê²€ì¦ëœ ë°ì´í„° ì „ë‹¬
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input
        {...register("email", {
          required: "ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
          pattern: {
            value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,
            message: "ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤",
          },
        })}
      />
      {errors.email && <p>{errors.email.message}</p>}

      <input
        type="password"
        {...register("password", {
          required: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
          minLength: {
            value: 6,
            message: "ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤",
          },
        })}
      />
      {errors.password && <p>{errors.password.message}</p>}

      <button type="submit" disabled={isLoading}>
        {isLoading ? "ë¡œê·¸ì¸ ì¤‘..." : "ë¡œê·¸ì¸"}
      </button>
    </form>
  );
}
```

---

#### SignupForm.tsx (ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ê²€ì¦)

```typescript
export function SignupForm({ onSuccess, isLoading }: SignupFormProps) {
  const {
    register,
    handleSubmit,
    watch,                    // â† password ê°ì‹œìš©
    formState: { errors },
  } = useForm<SignupFormData>({
    defaultValues: {
      username: "",
      email: "",
      password: "",
      confirmPassword: "",
    },
  });

  const password = watch("password");  // â† ì‹¤ì‹œê°„ password ê°’

  return (
    <form onSubmit={handleSubmit((data) => onSuccess(data))}>
      {/* username, email í•„ë“œ */}

      <input
        type="password"
        {...register("password", {
          required: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
          minLength: { value: 8, message: "ìµœì†Œ 8ì" },
        })}
      />

      <input
        type="password"
        {...register("confirmPassword", {
          required: "ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
          validate: (value) =>
            value === password || "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤",
          //       â†‘
          //    watch()ë¡œ ê°ì‹œí•œ passwordì™€ ë¹„êµ!
        })}
      />
      {errors.confirmPassword && <p>{errors.confirmPassword.message}</p>}
    </form>
  );
}
```

**ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ê²€ì¦ í”Œë¡œìš°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ìê°€ passwordì— "abc123" ì…ë ¥           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  const password = watch("password")         â”‚
â”‚  â†’ password = "abc123"                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ìê°€ confirmPasswordì— "abc" ì…ë ¥       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  validate í•¨ìˆ˜ ì‹¤í–‰:                         â”‚
â”‚  "abc" === "abc123"  â†’ false                â”‚
â”‚  â†’ "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤" ì—ëŸ¬ í‘œì‹œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ“ í•µì‹¬ ì •ë¦¬

#### React Hook Form ì‚¬ìš© ì´ìœ 
```
âœ… useState 8ê°œ â†’ useForm 1ê°œë¡œ ë‹¨ìˆœí™”
âœ… ê²€ì¦ ë¡œì§ ì„ ì–¸ì ìœ¼ë¡œ ì •ì˜
âœ… ë¦¬ë Œë”ë§ ìµœì í™” (ì„±ëŠ¥ í–¥ìƒ)
âœ… TypeScript ì™„ë²½ ì§€ì›
âœ… ì½”ë“œ ê°€ë…ì„± ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
```

#### ì£¼ìš” API
```
useForm()
â”œâ”€â”€ register()        - Input ë“±ë¡ ë° ê²€ì¦
â”œâ”€â”€ handleSubmit()    - í¼ ì œì¶œ + ìë™ ê²€ì¦
â”œâ”€â”€ watch()           - í•„ë“œ ê°’ ì‹¤ì‹œê°„ ê°ì‹œ
â””â”€â”€ formState.errors  - ê²€ì¦ ì—ëŸ¬ ë©”ì‹œì§€
```

#### SOLID ì›ì¹™ ì ìš©
```
âœ… ê° ì»´í¬ë„ŒíŠ¸ê°€ ìì‹ ì˜ í¼ ìƒíƒœ ê´€ë¦¬ (SRP)
âœ… ë¶€ëª¨ëŠ” ê²°ê³¼ë§Œ ë°›ìŒ (onSuccess ì½œë°±)
âœ… í¼ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ ìº¡ìŠí™”
âœ… ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš©ì„± ê·¹ëŒ€í™”
```

#### forwardRef íŒ¨í„´
```
âœ… ì»¤ìŠ¤í…€ Input ì»´í¬ë„ŒíŠ¸ì—ì„œ ref ì „ë‹¬
âœ… register()ì™€ í˜¸í™˜ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ ì œì‘
âœ… displayNameìœ¼ë¡œ ë””ë²„ê¹… ìš©ì´ì„± í™•ë³´
```

---

## 8. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UI ë¡œì§ ë¶„ë¦¬ ì›ì¹™

### ğŸ¤” ì™œ handleLogin/handleSignupì€ page.tsxì— ìˆì„ê¹Œ?

ì´ê²ƒì€ **ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬(Separation of Concerns)** ì›ì¹™ì˜ í•µì‹¬ì…ë‹ˆë‹¤.

---

### ğŸ“Š ì—­í•  ë¶„ë¦¬ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        page.tsx (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ)         â”‚
â”‚                                             â”‚
â”‚  âœ… ì±…ì„:                                    â”‚
â”‚  - useAuth() í›…ìœ¼ë¡œ API í•¨ìˆ˜ ê°€ì ¸ì˜¤ê¸°        â”‚
â”‚  - ë¡œê·¸ì¸/íšŒì›ê°€ì… ì„±ê³µ í›„ ì²˜ë¦¬              â”‚
â”‚  - ë¦¬ë‹¤ì´ë ‰íŠ¸ (router.push)                 â”‚
â”‚  - ì—ëŸ¬ ì²˜ë¦¬ ë° ì‚¬ìš©ì ì•Œë¦¼                  â”‚
â”‚  - ë¡œë”© ìƒíƒœ ê´€ë¦¬                            â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“ props
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LoginForm      â”‚   â”‚  SignupForm     â”‚
â”‚  (UI ë¡œì§ ê³„ì¸µ)  â”‚   â”‚  (UI ë¡œì§ ê³„ì¸µ)  â”‚
â”‚                 â”‚   â”‚                 â”‚
â”‚  âœ… ì±…ì„:        â”‚   â”‚  âœ… ì±…ì„:        â”‚
â”‚  - í¼ ë Œë”ë§     â”‚   â”‚  - í¼ ë Œë”ë§     â”‚
â”‚  - ì…ë ¥ ê²€ì¦     â”‚   â”‚  - ì…ë ¥ ê²€ì¦     â”‚
â”‚  - ê²€ì¦ëœ ë°ì´í„° â”‚   â”‚  - ê²€ì¦ëœ ë°ì´í„° â”‚
â”‚    ë¶€ëª¨ì—ê²Œ ì „ë‹¬ â”‚   â”‚    ë¶€ëª¨ì—ê²Œ ì „ë‹¬ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ğŸ¯ í•µì‹¬ ì´ìœ  4ê°€ì§€

#### 1ï¸âƒ£ **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UI ë¡œì§ ë¶„ë¦¬**

**page.tsx (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§):**
```typescript
const handleLogin = async (data: LoginFormData) => {
  setIsLoading(true);
  try {
    await login(data.email, data.password);  // â† API í˜¸ì¶œ
    router.push("/");                        // â† ë¦¬ë‹¤ì´ë ‰íŠ¸
  } catch (error) {
    alert("ë¡œê·¸ì¸ ì‹¤íŒ¨: " + error.message);  // â† ì—ëŸ¬ ì²˜ë¦¬
  } finally {
    setIsLoading(false);                     // â† ìƒíƒœ ê´€ë¦¬
  }
};
```

**LoginForm (UI ë¡œì§):**
```typescript
const onSubmit = (data: LoginFormData) => {
  onSuccess(data);  // â† ê²€ì¦ë§Œ ì±…ì„, ì´í›„ ì²˜ë¦¬ëŠ” ë¶€ëª¨ì—ê²Œ ìœ„ì„
};
```

**ë¶„ë¦¬ ì´ìœ :**
- LoginFormì€ "ì…ë ¥ ë°›ê¸° + ê²€ì¦"ë§Œ ì±…ì„
- page.tsxëŠ” "ê²€ì¦ëœ ë°ì´í„°ë¡œ ë¬´ì—‡ì„ í• ì§€" ì±…ì„
- ê°ìì˜ ì—­í• ì´ ëª…í™•

---

#### 2ï¸âƒ£ **LoginFormì€ "ì–´ë–»ê²Œ ì²˜ë¦¬í• ì§€" ëª°ë¼ë„ ë¨**

**LoginFormì˜ ê´€ì :**
```typescript
interface LoginFormProps {
  onSuccess: (data: LoginFormData) => void;  // â† "ì„±ê³µí•˜ë©´ ì´ê±¸ í˜¸ì¶œí•´"
  isLoading: boolean;                        // â† ë¡œë”© ìƒíƒœë§Œ ë°›ìŒ
}
```

**LoginFormì´ ëª¨ë¥´ëŠ” ê²ƒë“¤:**
```
â“ ë¡œê·¸ì¸ ì„±ê³µ í›„ ì–´ë””ë¡œ ì´ë™? â†’ page.tsxê°€ ê²°ì •
â“ ì—ëŸ¬ë¥¼ ì–´ë–»ê²Œ í‘œì‹œ? (alert? toast?) â†’ page.tsxê°€ ê²°ì •
â“ ë¡œë”© ìƒíƒœë¥¼ ì–¸ì œ ì‹œì‘/ì¢…ë£Œ? â†’ page.tsxê°€ ê´€ë¦¬
```

---

**ë§Œì•½ LoginForm ì•ˆì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë„£ëŠ”ë‹¤ë©´:**

```typescript
// âŒ ë‚˜ìœ ì˜ˆì‹œ: LoginFormì´ ë„ˆë¬´ ë§ì´ ì•Œì•„ì•¼ í•¨
function LoginForm() {
  const { login } = useAuth();
  const router = useRouter();

  const onSubmit = async (data: LoginFormData) => {
    try {
      await login(data.email, data.password);
      router.push("/");  // â† ë¦¬ë‹¤ì´ë ‰íŠ¸ ê²½ë¡œ í•˜ë“œì½”ë”©
    } catch (error) {
      alert(error);      // â† ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ ê³ ì •
    }
  };
}
```

**ë¬¸ì œì :**
```
âŒ ë¦¬ë‹¤ì´ë ‰íŠ¸ ê²½ë¡œê°€ "/" ê³ ì •
   â†’ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ê³  ì‹¶ìœ¼ë©´ LoginForm ìˆ˜ì • í•„ìš”

âŒ ì—ëŸ¬ ì²˜ë¦¬ê°€ alert() ê³ ì •
   â†’ toast ì•Œë¦¼ì„ ì“°ê³  ì‹¶ìœ¼ë©´ LoginForm ìˆ˜ì • í•„ìš”

âŒ LoginFormì´ useAuth, useRouter ì˜ì¡´
   â†’ í…ŒìŠ¤íŠ¸í•  ë•Œ ëª¨í‚¹(mocking) ì–´ë ¤ì›€

âŒ ì¬ì‚¬ìš© ë¶ˆê°€ëŠ¥
   â†’ ëª¨ë‹¬ ë¡œê·¸ì¸, ê´€ë¦¬ì ë¡œê·¸ì¸ ë“± ë‹¤ë¥¸ ìƒí™©ì—ì„œ ì‚¬ìš© ëª»í•¨
```

---

#### 3ï¸âƒ£ **ì¬ì‚¬ìš©ì„± ê·¹ëŒ€í™”**

**í˜„ì¬ êµ¬ì¡°ì˜ ì¥ì :**

```typescript
// ğŸ¯ ìƒí™© 1: ë¡œê·¸ì¸ í˜ì´ì§€ - ì„±ê³µ ì‹œ í™ˆìœ¼ë¡œ
<LoginForm
  onSuccess={async (data) => {
    await login(data.email, data.password);
    router.push("/");
  }}
  isLoading={isLoading}
/>

// ğŸ¯ ìƒí™© 2: ëª¨ë‹¬ ë¡œê·¸ì¸ - ì„±ê³µ ì‹œ ëª¨ë‹¬ë§Œ ë‹«ê¸°
<LoginForm
  onSuccess={async (data) => {
    await login(data.email, data.password);
    closeModal();
  }}
  isLoading={isLoading}
/>

// ğŸ¯ ìƒí™© 3: ê´€ë¦¬ì í˜ì´ì§€ - ì„±ê³µ ì‹œ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œë¡œ
<LoginForm
  onSuccess={async (data) => {
    await adminLogin(data.email, data.password);
    router.push("/admin");
  }}
  isLoading={isLoading}
/>

// ğŸ¯ ìƒí™© 4: ì²´í¬ì•„ì›ƒ í˜ì´ì§€ - ì„±ê³µ ì‹œ ê²°ì œ ì§„í–‰
<LoginForm
  onSuccess={async (data) => {
    await login(data.email, data.password);
    proceedToCheckout();
  }}
  isLoading={isLoading}
/>
```

**ê°™ì€ LoginForm ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ ë‹¤ë¥´ê²Œ ì‚¬ìš© ê°€ëŠ¥!**

---

#### 4ï¸âƒ£ **ìƒíƒœ ê´€ë¦¬ì˜ ì±…ì„ ì†Œì¬ ëª…í™•í™”**

**isLoading ìƒíƒœ ê´€ë¦¬:**

```typescript
// page.tsxê°€ ë¡œë”© ìƒíƒœ ê´€ë¦¬ ì±…ì„
const [isLoading, setIsLoading] = useState(false);

const handleLogin = async (data: LoginFormData) => {
  setIsLoading(true);   // â† ë¡œë”© ì‹œì‘
  try {
    await login(data.email, data.password);
    router.push("/");
  } catch (error) {
    alert(error);
  } finally {
    setIsLoading(false); // â† ë¡œë”© ì¢…ë£Œ (ì„±ê³µ/ì‹¤íŒ¨ ìƒê´€ì—†ì´)
  }
};

const handleSignup = async (data: SignupFormData) => {
  setIsLoading(true);   // â† ê°™ì€ ë¡œë”© ìƒíƒœ ê³µìœ 
  // ...
};
```

**ì¥ì :**
```
âœ… ë¡œê·¸ì¸/íšŒì›ê°€ì… í¼ì´ ë™ì‹œì— ë¡œë”© ìƒíƒœ ê³µìœ 
âœ… íƒ­ ì „í™˜ ì‹œì—ë„ ë¡œë”© ìƒíƒœ ìœ ì§€
âœ… ì „ì—­ ë¡œë”© ì¸ë””ì¼€ì´í„° êµ¬í˜„ ìš©ì´
```

---

### ğŸ“‹ ì±…ì„ ë¶„ë¦¬ í‘œ

| ì»´í¬ë„ŒíŠ¸ | ì—­í•  | ì±…ì„ | ì•Œì•„ì•¼ í•˜ëŠ” ê²ƒ |
|----------|------|------|---------------|
| **page.tsx** | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì¸µ | - API í˜¸ì¶œ<br>- ì„±ê³µ/ì‹¤íŒ¨ ì²˜ë¦¬<br>- ë¦¬ë‹¤ì´ë ‰íŠ¸<br>- ì „ì—­ ìƒíƒœ ê´€ë¦¬ | - useAuth() í›…<br>- ì„±ê³µ í›„ ì´ë™ ê²½ë¡œ<br>- ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹<br>- ë¡œë”© ìƒíƒœ |
| **LoginForm** | UI ë¡œì§ ê³„ì¸µ | - í¼ ë Œë”ë§<br>- ì…ë ¥ ê²€ì¦<br>- ê²€ì¦ëœ ë°ì´í„° ì „ë‹¬ | - í¼ í•„ë“œ êµ¬ì¡°<br>- ê²€ì¦ ê·œì¹™<br>- onSuccess ì½œë°± |

---

### ğŸš« ì•ˆí‹°íŒ¨í„´: LoginFormì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í¬í•¨

```typescript
// âŒ ì ˆëŒ€ ì´ë ‡ê²Œ í•˜ì§€ ë§ ê²ƒ!
function LoginForm() {
  const { login } = useAuth();
  const router = useRouter();
  const [isLoading, setIsLoading] = useState(false);

  const { register, handleSubmit } = useForm<LoginFormData>();

  const onSubmit = async (data: LoginFormData) => {
    setIsLoading(true);
    try {
      await login(data.email, data.password);
      router.push("/");  // â† í•˜ë“œì½”ë”©ëœ ë¦¬ë‹¤ì´ë ‰íŠ¸
    } catch (error) {
      alert(error);      // â† ê³ ì •ëœ ì—ëŸ¬ ì²˜ë¦¬
    } finally {
      setIsLoading(false);
    }
  };

  return <form onSubmit={handleSubmit(onSubmit)}>...</form>;
}
```

**ë¬¸ì œì :**
```
âŒ LoginFormì˜ ì±…ì„ì´ ë„ˆë¬´ ë§ìŒ (SRP ìœ„ë°˜)
   - í¼ ê²€ì¦ (ì›ë˜ ì±…ì„)
   - API í˜¸ì¶œ (ì¶”ê°€ë¨)
   - ë¦¬ë‹¤ì´ë ‰íŠ¸ (ì¶”ê°€ë¨)
   - ì—ëŸ¬ ì²˜ë¦¬ (ì¶”ê°€ë¨)
   - ë¡œë”© ìƒíƒœ (ì¶”ê°€ë¨)

âŒ ì¬ì‚¬ìš© ë¶ˆê°€ëŠ¥
   - ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œ ì‚¬ìš© ì‹œ "/" ê²½ë¡œë¡œ ê³ ì •ë¨
   - ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ ë³€ê²½ ë¶ˆê°€

âŒ í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€
   - useAuth, useRouter ëª¨í‚¹ í•„ìš”
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë³µì¡ë„ ì¦ê°€

âŒ ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€
   - ë¦¬ë‹¤ì´ë ‰íŠ¸ ê²½ë¡œ ë³€ê²½ ì‹œ ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •
   - ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ ë³€ê²½ ì‹œ ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •
```

---

### âœ… ì˜¬ë°”ë¥¸ íŒ¨í„´: ì½œë°± íŒ¨í„´ (Callback Pattern)

```typescript
// âœ… LoginForm: UI ë¡œì§ë§Œ ì±…ì„
function LoginForm({ onSuccess, isLoading }: LoginFormProps) {
  const { register, handleSubmit, formState: { errors } } = useForm<LoginFormData>();

  const onSubmit = (data: LoginFormData) => {
    onSuccess(data);  // â† ê²€ì¦ëœ ë°ì´í„°ë§Œ ì „ë‹¬, ì´í›„ ì²˜ë¦¬ëŠ” ë¶€ëª¨ ì±…ì„
  };

  return <form onSubmit={handleSubmit(onSubmit)}>...</form>;
}

// âœ… page.tsx: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì±…ì„
function AuthPage() {
  const { login } = useAuth();
  const router = useRouter();
  const [isLoading, setIsLoading] = useState(false);

  const handleLogin = async (data: LoginFormData) => {
    setIsLoading(true);
    try {
      await login(data.email, data.password);
      router.push("/");  // â† ì—¬ê¸°ì„œ ê²½ë¡œ ê²°ì •
    } catch (error) {
      alert(error);      // â† ì—¬ê¸°ì„œ ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ ê²°ì •
    } finally {
      setIsLoading(false);
    }
  };

  return <LoginForm onSuccess={handleLogin} isLoading={isLoading} />;
}
```

**ì¥ì :**
```
âœ… LoginFormì€ ìˆœìˆ˜í•œ UI ì»´í¬ë„ŒíŠ¸
   - propsë§Œ ë°›ì•„ì„œ ë Œë”ë§
   - ì™¸ë¶€ ì˜ì¡´ì„± ìµœì†Œí™” (useAuth, useRouter ì—†ìŒ)

âœ… page.tsxëŠ” ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°(Orchestrator)
   - ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ ì¡°ìœ¨
   - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬

âœ… ëª…í™•í•œ ë°ì´í„° íë¦„
   - ë¶€ëª¨ â†’ ìì‹: isLoading, onSuccess
   - ìì‹ â†’ ë¶€ëª¨: ê²€ì¦ëœ ë°ì´í„°

âœ… ì¬ì‚¬ìš©ì„± ê·¹ëŒ€í™”
   - ë‹¤ë¥¸ ìƒí™©ì—ì„œ ë‹¤ë¥¸ onSuccess ì „ë‹¬ ê°€ëŠ¥
```

---

### ğŸ’¡ ì‹¤ìƒí™œ ë¹„ìœ : ìŒì‹ì 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          page.tsx = ë§¤ë‹ˆì €                   â”‚
â”‚                                             â”‚
â”‚  âœ… ì—­í• :                                    â”‚
â”‚  - ì†ë‹˜ ì£¼ë¬¸ ë°›ê¸°                            â”‚
â”‚  - ì£¼ë°©ì— ì „ë‹¬                               â”‚
â”‚  - ìŒì‹ ë‚˜ì˜¤ë©´ ì„œë¹™                          â”‚
â”‚  - ê³„ì‚° ì²˜ë¦¬                                 â”‚
â”‚  - ë¬¸ì œ ë°œìƒ ì‹œ í•´ê²°                         â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       LoginForm = ì£¼ë¬¸ì„œ ì–‘ì‹                â”‚
â”‚                                             â”‚
â”‚  âœ… ì—­í• :                                    â”‚
â”‚  - ë©”ë‰´ ì´ë¦„, ìˆ˜ëŸ‰ ì…ë ¥ë€ ì œê³µ               â”‚
â”‚  - í•„ìˆ˜ í•­ëª© ì²´í¬ (ë©”ë‰´ëª…, ìˆ˜ëŸ‰)             â”‚
â”‚  - ì‘ì„±ëœ ì£¼ë¬¸ì„œë¥¼ ë§¤ë‹ˆì €ì—ê²Œ ì „ë‹¬           â”‚
â”‚                                             â”‚
â”‚  âŒ í•˜ì§€ ì•ŠëŠ” ê²ƒ:                            â”‚
â”‚  - ì£¼ë°©ì— ì§ì ‘ ê°€ì„œ ìš”ë¦¬í•˜ì§€ ì•ŠìŒ            â”‚
â”‚  - ê³„ì‚°í•˜ì§€ ì•ŠìŒ                             â”‚
â”‚  - ì„œë¹™í•˜ì§€ ì•ŠìŒ                             â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë§Œì•½ ì£¼ë¬¸ì„œê°€ ëª¨ë“  ì¼ì„ í•œë‹¤ë©´?**
```
âŒ ì£¼ë¬¸ì„œê°€ ì§ì ‘ ì£¼ë°©ì— ê°€ì„œ ìš”ë¦¬í•˜ê³ 
âŒ ê³„ì‚°ê¹Œì§€ í•˜ëŠ” ê²ƒê³¼ ê°™ìŒ
âŒ ì£¼ë¬¸ì„œì˜ ì±…ì„ì´ ë„ˆë¬´ ë§ì•„ì§!
```

---

### ğŸ“ í•µì‹¬ ì •ë¦¬

#### ì™œ handleLogin/handleSignupì´ page.tsxì— ìˆëŠ”ê°€?

**1. ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP)**
```
LoginForm = UI + ê²€ì¦ë§Œ ì±…ì„
page.tsx = ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì±…ì„
```

**2. ì¬ì‚¬ìš©ì„±**
```
ê°™ì€ LoginFormì„ ë‹¤ì–‘í•œ ìƒí™©ì—ì„œ ë‹¤ë¥´ê²Œ ì‚¬ìš©
(í™ˆ ì´ë™ / ëª¨ë‹¬ ë‹«ê¸° / ì²´í¬ì•„ì›ƒ ì§„í–‰ ë“±)
```

**3. ìœ ì§€ë³´ìˆ˜ì„±**
```
ë¦¬ë‹¤ì´ë ‰íŠ¸ ê²½ë¡œ ë³€ê²½ â†’ page.tsxë§Œ ìˆ˜ì •
ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ ë³€ê²½ â†’ page.tsxë§Œ ìˆ˜ì •
LoginFormì€ ê±´ë“œë¦¬ì§€ ì•ŠìŒ
```

**4. í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**
```
LoginForm: ìˆœìˆ˜ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ (props â†’ ë Œë”ë§)
page.tsx: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í…ŒìŠ¤íŠ¸ (API, ë¦¬ë‹¤ì´ë ‰íŠ¸)
```

---

### ğŸ“ ì„¤ê³„ ì›ì¹™

**React ì»´í¬ë„ŒíŠ¸ ì„¤ê³„ ì‹œ í•­ìƒ ë¬¼ì–´ë³´ê¸°:**
```
1. ì´ ì»´í¬ë„ŒíŠ¸ì˜ ë‹¨ í•˜ë‚˜ì˜ ì±…ì„ì€ ë¬´ì—‡ì¸ê°€?
2. ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ë¥¸ ê³³ì—ì„œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ê°€?
3. propsë§Œ ë°”ê¿”ì„œ ë‹¤ë¥¸ ë™ì‘ì„ í•  ìˆ˜ ìˆëŠ”ê°€?
4. ì™¸ë¶€ ì˜ì¡´ì„±(í›…, API)ì´ ìµœì†Œí™”ë˜ì–´ ìˆëŠ”ê°€?
```

**ì •ë‹µ:**
```
âœ… LoginFormì˜ ë‹¨ í•˜ë‚˜ì˜ ì±…ì„: "ë¡œê·¸ì¸ ì…ë ¥ ë°›ê³  ê²€ì¦í•˜ê¸°"
âœ… ì¬ì‚¬ìš© ê°€ëŠ¥: ëª¨ë‹¬, í˜ì´ì§€, ê´€ë¦¬ì í˜ì´ì§€ ë“± ì–´ë””ì„œë“ 
âœ… propsë¡œ ë™ì‘ ë³€ê²½: onSuccess ì½œë°±ìœ¼ë¡œ ë‹¤ë¥¸ ì²˜ë¦¬ ê°€ëŠ¥
âœ… ì˜ì¡´ì„± ìµœì†Œí™”: useFormë§Œ ì‚¬ìš©, useAuth/useRouter ì—†ìŒ
```

---

## ğŸ”„ ë‹¤ìŒ í•™ìŠµ ì˜ˆì •

- [x] React Hook Formìœ¼ë¡œ ë¡œê·¸ì¸/íšŒì›ê°€ì… í¼ êµ¬í˜„
- [x] ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UI ë¡œì§ ë¶„ë¦¬ ì›ì¹™ ì´í•´
- [ ] layout.tsxì— AuthProvider ì¶”ê°€
- [ ] Axios ì¸í„°ì…‰í„°ì— JWT í† í° ìë™ ì¶”ê°€
- [ ] ë³´í˜¸ëœ ë¼ìš°íŠ¸ (ProtectedRoute) êµ¬í˜„
- [ ] ë„¤ë¹„ê²Œì´ì…˜ì— ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ
- [ ] í† í° ê°±ì‹  (Refresh Token) ë¡œì§
